---
import { Schema } from 'astro-seo-schema'
import type { MarkdownLayoutProps } from 'astro'

import '@styles/global.css'

import { SITE } from '@config'
import SchemaOrganizationFutureStateDesignCo from '@components/Schema/Organization/FutureStateDesignCo.astro'
import BaseHead from '@components/BaseHead.astro'
import Logo from '@components/Logo.astro'
import Footer from '@components/Footer.astro'

type Props = MarkdownLayoutProps<{
  name: string
  headline: string
  description: string
  image?: {
    url?: string
    width?: number
    height?: number
    alt?: string
  }
  datePublished?: string
}>

const { frontmatter } = Astro.props as Props
const { name, description, image, datePublished, url } = frontmatter

const meta = {
  title: `${name} - ${SITE.name}`,
  description,
  url,
  image,
}
---

<html lang="en">
  <BaseHead {...meta}>
    <>
      <Schema
        item={{
          '@context': 'https://schema.org',
          '@type': 'Article',
          name,
          headline: name,
          description,
          image: {
            '@type': 'ImageObject',
            url: image ? image.url : '',
          },
          datePublished,
          author: [
            {
              '@type': 'Person',
              givenName: 'Mark',
              familyName: 'Wilson',
              jobTitle: 'Managing Partner & CEO',
              image: 'https://futurestate.design/images/mark-wilson.jpg',
              sameAs: ['https://www.linkedin.com/in/mwilson/'],
              worksFor: 'fsdc',
            },
            {
              '@type': 'Person',
              givenName: 'Stephanie',
              familyName: 'Fletcher',
              jobTitle: 'Managing Partner & CDO',
              image: 'https://futurestate.design/images/stephanie-fletcher.jpg',
              sameAs: [
                'https://www.linkedin.com/in/stephanie-fletcher-6840152/',
              ],
              worksFor: 'fsdc',
            },
          ],
          copyrightHolder: 'fsdc',
        }}
      />
      <SchemaOrganizationFutureStateDesignCo />
    </>
  </BaseHead>
  <body>
    <div class="flex flex-col w-full min-h-screen">
      <main class="flex-auto bg-qux text-white">
        <article class="flex-auto">
          <div class="foo">
            <div
              class="grid items-start gap-6 pt-10 lg:(grid-cols-[220px_1fr] gap-90px pt-60px)"
            >
              <a href="/" title={`Return to the ${SITE.name} homepage`}>
                <Logo />
              </a>

              <a href="/" class="body inline-flex items-center lg:row-start-2">
                <div class="i-custom:arrow -rotate-135deg mr-0.25em"></div>
                Back
              </a>

              <h1 class="h0">{name}</h1>

              <div class="prose">
                <slot />
                {
                  image && image.url && (
                    <img
                      src={image.url}
                      width={image.width}
                      height={image.height}
                      alt={image.alt}
                      loading="lazy"
                    />
                  )
                }
              </div>
            </div>
          </div>
        </article>
      </main>
      <Footer />
    </div>
  </body>
</html>
