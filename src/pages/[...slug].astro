---
import { getCollection } from 'astro:content';

import Default from '@/layouts/Default.astro';
import { SITE } from '@/config';

export async function getStaticPaths() {
  const pageEntries = await getCollection('page');
  return pageEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { data, slug: url } = entry;
const { name, description, image, theme } = data;

const { Content } = await entry.render();
---

{
  entry && (
    <Default
      title={`${name} - ${SITE.name}`}
      description={description}
      url={url}
      image={image}
      class={theme == 'white' ? 'bg-qux text-white' : ''}
    >
      <article>
        <div class="container">
          <div class="lg:grid-gap-10 lg:grid lg:grid-cols-10">
            <div class="lg:col-span-7 lg:col-start-4">
              <h1 class="sr-only">{name}</h1>
            </div>
          </div>
        </div>
        <Content />
      </article>
    </Default>
  )
}
